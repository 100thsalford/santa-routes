<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Find Your Santa Route</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tabletop.js/1.5.1/tabletop.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 40px;
      max-width: 600px;
      margin: auto;
      background: #f8f8f8;
    }

    h2 {
      color: #c30000;
    }

    input {
      padding: 10px;
      width: 100%;
      font-size: 16px;
      margin-top: 10px;
    }

    #result {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
    }

    .footer {
      margin-top: 40px;
      font-size: 12px;
      color: #999;
    }
  </style>
</head>
<body>

<h2>ðŸŽ… Find Out When Santa Visits Your Street</h2>
<p>Start typing your street name below:</p>
<input type="text" id="searchInput" placeholder="e.g. Acacia Avenue" />
<div id="result"></div>

<div class="footer">Powered by 100th Salford Scouts</div>

<script>
  const publicSpreadsheetURL = 'https://docs.google.com/spreadsheets/d/1MauiqhZcdGRH6EJdn4ygots0PMQDHvanPNxNPcxe2Gg/pubhtml';

  let data = [];

  function init() {
    Tabletop.init({
      key: publicSpreadsheetURL,
      callback: function(sheetData) {
        data = sheetData;
        console.log("Data loaded:", data);

        document.getElementById('searchInput').addEventListener('input', function () {
          const query = this.value.toLowerCase().trim();
          const resultDiv = document.getElementById('result');

          if (!query) {
            resultDiv.innerText = '';
            return;
          }

          const match = data.find(row =>
            row['Street Name'] && row['Street Name'].toLowerCase().includes(query)
          );

          if (match) {
            resultDiv.innerText = `ðŸŽ„ Route ${match['Route Letter']} will visit on ${match['Route Date']}`;
          } else {
            resultDiv.innerText = "No match found.";
          }
        });
      },
      simpleSheet: true
    });
  }

  window.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
